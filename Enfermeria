<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Malla Curricular Enfermería</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #f9f9f9;
      margin: 0;
      padding: 20px;
      color: #333;
    }
    h1 {
      text-align: center;
      margin-bottom: 10px;
    }
    .info {
      text-align: center;
      margin-bottom: 30px;
    }
    .malla {
      display: flex;
      overflow-x: auto;
      gap: 20px;
    }
    .semestre {
      background: #fff;
      padding: 10px;
      border-radius: 15px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      min-width: 220px;
    }
    .semestre h3 {
      text-align: center;
      background-color: #e0f0ff;
      padding: 8px;
      border-radius: 10px;
    }
    .materia {
      margin: 5px 0;
      padding: 8px;
      border-radius: 8px;
      background-color: #eaf4f4;
      cursor: pointer;
      transition: background-color 0.3s;
      position: relative;
    }
    .materia:hover {
      background-color: #d0ecec;
    }
    .materia.aprobada {
      background-color: #c3e6cb;
      text-decoration: line-through;
    }
    .materia.bloqueada {
      background-color: #f8d7da;
      cursor: not-allowed;
    }
    .materia[title]::after {
      content: attr(title);
      position: absolute;
      bottom: 100%;
      left: 0;
      background: #333;
      color: #fff;
      padding: 5px;
      border-radius: 5px;
      white-space: nowrap;
      display: none;
    }
    .materia:hover::after {
      display: block;
    }
  </style>
</head>
<body>
  <h1>Malla Curricular</h1>
  <div class="info">
    ESTUDIANTE: HOLGUIN CHAVEZ THOMAS <br>
    PROGRAMA: P617 ENFERMERIA <br>
    PENSUM: 17520
  </div>
  <div class="malla" id="malla"></div>

  <script>
    const materias = [
      {semestre: 1, nombre: "BIOLOGÍA CELULAR Y MOLECULAR"},
      {semestre: 1, nombre: "QUÍMICA GENERAL"},
      {semestre: 1, nombre: "ANATOMÍA GENERAL"},
      {semestre: 1, nombre: "HISTORIA Y FUDAMENTO DEL CUIDADO ENFERMERO"},

      {semestre: 2, nombre: "BIOÉTICA"},
      {semestre: 2, nombre: "BIOQUÍMICA", requiere: ["QUÍMICA GENERAL"]},
      {semestre: 2, nombre: "PSICOLOGÍA GENERAL"},
      {semestre: 2, nombre: "ANATOMORFOFISIOLOGÍA", requiere: ["ANATOMÍA GENERAL"]},
      {semestre: 2, nombre: "CUIDADO ENFERMERO EN LA SALUD DE LA COMUNIDAD"},

      {semestre: 3, nombre: "INGLÉS l"},
      {semestre: 3, nombre: "MICROBIOLOGÍA"},
      {semestre: 3, nombre: "FISIOLOGÍA GENERAL"},
      {semestre: 3, nombre: "CUIDADO ENFERMERO Y VALORACIÓN PERSONA – FAMILIA – ENTERNO"},
      {semestre: 3, nombre: "SALUD PÚBLICA"},

      {semestre: 4, nombre: "INGLÉS ll", requiere: ["INGLÉS l"]},
      {semestre: 4, nombre: "GENÉTICA GENERAL"},
      {semestre: 4, nombre: "FARMACOLOGÍA", requiere: ["BIOQUÍMICA"]},
      {semestre: 4, nombre: "CUIDADO ENFERMERO DEL ADULTO l"},

      {semestre: 5, nombre: "INGLÉS lll", requiere: ["INGLÉS ll"]},
      {semestre: 5, nombre: "ELECTIVA DE FACULTAD"},
      {semestre: 5, nombre: "FUNDAMENTO EPISTEMOLÓGICO DEL CUIDADO ENFERMERO"},
      {semestre: 5, nombre: "PATALOGÍA GENERAL"},
      {semestre: 5, nombre: "CUIDADO ENFERMERO DEL ADULTO ll"},

      {semestre: 6, nombre: "INGLÉS lV", requiere: ["INGLÉS lll"]},
      {semestre: 6, nombre: "RAZONAMIENTO CUANTITATIVO"},
      {semestre: 6, nombre: "CONSTITUCIÓN POLÍTICA"},
      {semestre: 6, nombre: "CUIDADO ENFERMERO DE LA GESTANTE Y SU ENTORNO"},

      {semestre: 7, nombre: "BIOMETRÍA"},
      {semestre: 7, nombre: "CUIDADO ENFERMERO NIÑO – ADOLESCENTE Y ENTORNO"},
      {semestre: 7, nombre: "ELECTIVA DE PROFUNDIZACIÓN I"},

      {semestre: 8, nombre: "EPIDEMIOLOGÍA"},
      {semestre: 8, nombre: "ELECTIVA DE PROFUNDIZACIÓN II"},
      {semestre: 8, nombre: "CUIDADO ENFERMERO AL ADULTO MAYOR Y SALUD MENTAL"},

      {semestre: 9, nombre: "TRABAJO DE GRADO I"},
      {semestre: 9, nombre: "ELECTIVA DE PROFUNDIZACIÓN III"},
      {semestre: 9, nombre: "CUIDADOS PALIATIVOS"},
      {semestre: 9, nombre: "ADMINISTRACIÓN Y GESTIÓN DEL CUIDADO I"},

      {semestre: 10, nombre: "TRABAJO DE GRADO II", requiere: ["TRABAJO DE GRADO I"]},
      {semestre: 10, nombre: "ADMINISTRACIÓN Y GESTIÓN DEL CUIDADO II"}
    ];

    const estado = JSON.parse(localStorage.getItem("estadoMaterias") || '{}');

    const container = document.getElementById("malla");

    for (let s = 1; s <= 10; s++) {
      const col = document.createElement("div");
      col.className = "semestre";
      col.innerHTML = `<h3>Semestre ${s}</h3>`;

      materias.filter(m => m.semestre === s).forEach(m => {
        const div = document.createElement("div");
        div.className = "materia";
        div.textContent = m.nombre;

        if (estado[m.nombre]) {
          div.classList.add("aprobada");
        } else if (m.requiere && !m.requiere.every(r => estado[r])) {
          div.classList.add("bloqueada");
          div.title = "Requiere: " + m.requiere.filter(r => !estado[r]).join(", ");
        }

        div.addEventListener("click", (e) => {
          if (div.classList.contains("bloqueada")) return;
          div.classList.toggle("aprobada");
          estado[m.nombre] = div.classList.contains("aprobada");
          localStorage.setItem("estadoMaterias", JSON.stringify(estado));
          location.reload();
        });

        col.appendChild(div);
      });
      container.appendChild(col);
    }
  </script>
</body>
</html>
